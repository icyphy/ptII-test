<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="WebServer" class="org.ptolemy.ptango.lib.WebServer">
  <description>
An attribute that runs a Jetty web server and routes incoming&#10;  HTTP requests to objects in the model that implement&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/HttpService.xml&quot;&gt;org.ptolemy.ptango.lib.HttpService&lt;/a&gt;. The server is set up during&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.html#initialize&quot;&gt;initialize()&lt;/a&gt; and taken down during&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.html#wrapup&quot;&gt;wrapup()&lt;/a&gt;.  The &lt;i&gt;resourceLocation&lt;/i&gt;&#10;  parameter gives a directory or URL relative to which this&#10;  web server should look for resources (like image files and&#10;  the like).&#10;  You can add additional resource bases by adding additional&#10;  parameters of type ptolemy.data.expr.FileParameter to&#10;  this WebServer (select Configure in the context menu).&#10;&#10;  &lt;p&gt;&lt;a href=&quot;http://wiki.eclipse.org/Jetty/Tutorial&quot;&gt;http://wiki.eclipse.org/Jetty/Tutorial&lt;/a&gt;&#10;  - The Jetty Tutorial&lt;/p&gt;  </description>
  <author>Elizabeth Latronico and Edward A. Lee</author>
  <version>$Id$</version>
  <since>Ptolemy II 10.0</since>
  <Pt.ProposedRating>Yellow (eal)</Pt.ProposedRating>
  <Pt.AcceptedRating>Red (ltrnc)</Pt.AcceptedRating>
    <!--ptolemy.data.expr.StringParameter-->
    <property name="applicationPath">The URL prefix to map this model to.  A model can be thought of as a&#10;  single application.&#10;&#10;  This defaults to &quot;/&quot;, meaning, accept requests for all URLs.&#10;  For example, if the WebServer is handling requests on &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#preferredPort&quot;&gt;preferredPort&lt;/a&gt; 8078&#10;  of localhost, the model will handle all requests that begin with&#10;  &lt;pre&gt;&#10;  http://localhost:8078/&#10;  &lt;/pre&gt;&#10;&#10;  If multiple applications are running on the same server, it's typical&#10;  to assign a unique application prefix for each.  For example, two&#10;  applications with application paths of &quot;/calendar&quot; and &quot;/music&quot; would&#10;  receive requests directed to&#10;  &lt;pre&gt;&#10;  http://localhost:8078/calendar&#10;  http://localhost:8078/music&#10;  &lt;/pre&gt;&#10;  respectively.&#10;&#10;  Applications may contain multiple servlets (provided by e.g.&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/HttpActor.xml&quot;&gt;org.ptolemy.ptango.lib.HttpActor&lt;/a&gt;s).&#10;  Each servlet typically defines a servlet path which is appended to&#10;  the application path for request routing.  For example, two servlets&#10;  with servlet paths &quot;/play&quot; and &quot;/upload&quot; in the music application&#10;  would receive requests directed to:&#10;  &lt;pre&gt;&#10;  http://localhost:8078/music/play&#10;  http://localhost:8078/music/upload&#10;  &lt;/pre&gt;&#10;  respectively.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="deployedPort">The port number the server is listening to.  Can be different from&#10;  preferredPort if dynamic port selection is enabled.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="preferredPort">The preferred port number for the server to listen to. This is a integer&#10;  that defaults to 8078.</property>
    <!--ptolemy.data.expr.StringParameter-->
    <property name="resourcePath">The URL prefix used to request resources (files) from this web service.&#10;&#10;  This defaults to &quot;/&quot;, meaning, clients should issue requests for files&#10;  to the base URL.  For example, if the WebServer is handling requests on&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#preferredPort&quot;&gt;preferredPort&lt;/a&gt; 8078 of localhost, the client can request file &quot;image.png&quot;&#10;  using:&#10;  &lt;pre&gt;&#10;  http://localhost:8078/image.png&#10;  &lt;/pre&gt;&#10;&#10;  The resourcePath is added as a prefix before the file's name in the URL.&#10;  For example, given the resourcePath &quot;/files&quot;, the client can request&#10;  file &quot;image.png&quot; using:&#10;  &lt;pre&gt;&#10;  http://localhost:8078/files/image.png&#10;  &lt;/pre&gt;&#10;&#10;  Relative URLs are permissible for files requested by pages served by&#10;  this WebServer (common for e.g. custom Javascript libraries).&#10;  For example, given the resourcePath &quot;/files&quot;, a file named &quot;custom.js&quot;&#10;  may be retrieved at the relative URL:&#10;  &lt;pre&gt;&#10;  /files/custom.js&#10;  &lt;/pre&gt;&#10;&#10;  Note that the name of the directory containing resources does NOT have&#10;  to match the URL used to access these resources.  See&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#resourceLocation&quot;&gt;resourceLocation&lt;/a&gt; regarding the resource directory.&#10;&#10;  Subdirectory search is supported (here, for subdirectories to the&#10;  directory specified by &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#resourceLocation&quot;&gt;resourceLocation&lt;/a&gt;). Add the subdirectory&#10;  path to the URL.  For example, given the resourcePath &quot;/files&quot;,&#10;  a file in subdirectory /user/photos named &quot;selfie.png&quot; may be&#10;  retrieved at URL:&#10;&#10;  &lt;pre&gt;&#10;  http://localhost:8078/files/user/photos/selfie.png&#10;  &lt;/pre&gt;</property>
    <!--ptolemy.data.expr.FileParameter-->
    <property name="resourceLocation">A directory or URL where the web server will look for resources&#10;  (like image files and the like).&#10;  This defaults to the current model's directory.&#10;&#10;  You can add additional resource locations by adding additional&#10;  parameters of type ptolemy.data.expr.FileParameter to&#10;  this WebServer (select Configure in the context menu).&#10;&#10;  If multiple resourceLocations are given, they will be searched in the&#10;  order that the parameters were instantiated.  The first file located&#10;  will be returned.&#10;&#10;  Note that the name of the directory containing resources does NOT have&#10;  to match the URL used to access these resources.  See&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#resourcePath&quot;&gt;resourcePath&lt;/a&gt; regarding the URL.</property>
    <!--ptolemy.data.expr.FileParameter-->
    <property name="temporaryFileLocation">A directory where the web server will look for resources&#10;  (like image files and the like). This specifies an additional&#10;  resource location after &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#resourceLocation&quot;&gt;resourceLocation&lt;/a&gt;, but the&#10;  directory specified here may be used by components implementing&#10;  &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/HttpService.xml&quot;&gt;org.ptolemy.ptango.lib.HttpService&lt;/a&gt; as a place to write temporary files&#10;  that will be found by the web server.&#10;  This defaults to &quot;$TMPDIR&quot;, a built-in variable&#10;  that specifies a temporary file location.&#10;  See the explanation of &lt;a href=&quot;../../../../org/ptolemy/ptango/lib/WebServer.xml#resourcePath&quot;&gt;resourcePath&lt;/a&gt;.</property>
</doc>
