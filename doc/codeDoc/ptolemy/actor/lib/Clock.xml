<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="Clock" class="ptolemy.actor.lib.Clock">
  <description>
This actor produces a periodic signal, a sequence of events at&#10; regularly spaced intervals.&#10; At the beginning of each time interval of length given by &lt;i&gt;period&lt;/i&gt;,&#10; starting from the time at which initialize() is invoked,&#10; this actor initiates a sequence of output events with values given by&#10; &lt;i&gt;values&lt;/i&gt; and offset into the period given by &lt;i&gt;offsets&lt;/i&gt;.&#10; These parameters contain arrays, which are required to have the same length.&#10; The &lt;i&gt;offsets&lt;/i&gt; array contains doubles, which&#10; must be nondecreasing and nonnegative,&#10; or an exception will be thrown when it is set.&#10; If any entry is greater than or equal to the &lt;i&gt;period&lt;/i&gt;&#10; then the corresponding output will never be produced.&#10; &lt;p&gt;&#10; The &lt;i&gt;values&lt;/i&gt; parameter by default&#10; contains an array of IntTokens with values 1 and 0.  The default&#10; &lt;i&gt;offsets&lt;/i&gt; array is {0.0, 1.0}.  Thus, the default output will be&#10; alternating 1 and 0 with 50% duty cycle.  The default period&#10; is 2.0.&#10; &lt;p&gt;&#10; The type of the output can be any token type. This type is inferred&#10; from the element type of the &lt;i&gt;values&lt;/i&gt; parameter.&#10; &lt;p&gt;&#10; If the &lt;i&gt;period&lt;/i&gt; is changed at any time, either by&#10; providing an input or by changing the parameter, then the&#10; new period will take effect as soon as possible. That is,&#10; if there is already a period in progress, it may be cut&#10; short if the new period is shorter so that its time matches&#10; the new period. But it will only be cut short if current&#10; time has not passed the cycle start time plus the new period.&#10; Otherwise, the period in progress will run to completion.&#10; &lt;p&gt;&#10; This actor can generate finite sequences by specifying&#10; a finite &lt;i&gt;numberOfCycles&lt;/i&gt;. The numberOfCycles has a default value&#10; UNBOUNDED, indicating infinite length of executions. If numberOfCycles is&#10; a positive number, once the specified number of cycles has been completed,&#10; then this actor returns false from the postfire() method, which indicates&#10; to the director that the actor should not be fired again.&#10; (A cycle is &quot;completed&quot; each time the last event in the &lt;i&gt;values&lt;/i&gt;&#10; array is produced).&#10; &lt;p&gt;&#10; The actor can also generate a finite sequence by giving a finite&#10; value to the &lt;i&gt;stopTime&lt;/i&gt; parameter. This gives a time rather than&#10; a number of cycles, and thus can be used to stop the clock in the middle&#10; of a cycle, unlike &lt;i&gt;numberOfCycles&lt;/i&gt;.  Just like &lt;i&gt;numberOfCycles&lt;/i&gt;,&#10; when the stop time is reached, the actor's postfire() method returns&#10; false.&#10; &lt;p&gt;&#10; If the &lt;i&gt;trigger&lt;/i&gt; input is connected, then an output will only&#10; be produced if a input has been received since the last output.&#10; The trigger input has no effect on the first output. After the&#10; first output event, no further output event will be produced&#10; until a time greater than or equal to the time at which a trigger&#10; input is received. At that time, the output produced will have&#10; whatever value would have been produced if the trigger input&#10; was not connected. Note that this trigger is typically useful&#10; in a feedback situation, where the output of the clock&#10; eventually results in a trigger input. If the time-stamp&#10; of that trigger input is less than the time between clock&#10; events, then the clock will behave as if there were no&#10; trigger input. Otherwise, it will &quot;skip beats.&quot;&#10; &lt;p&gt;&#10; This actor can be a bit tricky to use inside a ModalModel.&#10; In particular, if the actor is in a state refinement, then&#10; it may &quot;skip a beat&quot; because of the state not being the current&#10; state at the time of the beat. If this occurs, the clock will&#10; simply stop firing, and will produce no further outputs.&#10; To prevent this, the clock may be reinitialized&#10; (by setting the &lt;i&gt;reset&lt;/i&gt; flag&#10; of a modal model transition). Alternatively, you can assign&#10; a value to the&#10; the &lt;i&gt;period&lt;/i&gt; of the Clock in the &lt;i&gt;setActions&lt;/i&gt;&#10; of the transition. This will also have the effect of&#10; waking up the clock, but with a subtle difference.&#10; If you use a &lt;i&gt;reset&lt;/i&gt; transition, the clock starts&#10; over upon entering the destination state. If you set&#10; the &lt;i&gt;period&lt;/i&gt; parameter instead, then the clock&#10; behaves as if it had been running all along (except&#10; that its period may get changed). Thus, in the first&#10; case, the output events are aligned with the time&#10; of the transition, while in the second case, they&#10; are aligned with the start time of the model execution.&#10; &lt;p&gt;&#10; This actor is a timed source; the untimed version is Pulse.  </description>
  <author>Edward A. Lee, Haiyang Zheng</author>
  <version>$Id$</version>
  <since>Ptolemy II 0.3</since>
  <Pt.ProposedRating>Yellow (eal)</Pt.ProposedRating>
  <Pt.AcceptedRating>Yellow (yuhong)</Pt.AcceptedRating>
    <!--ptolemy.data.expr.Parameter-->
    <property name="numberOfCycles">The number of cycles to produce, or UNBOUNDED to specify no limit.&#10;  This is an integer with default UNBOUNDED.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="offsets">The offsets at which the specified values will be produced.&#10;  This parameter must contain an array of doubles, and it defaults&#10;  to {0.0, 1.0}.</property>
    <!--ptolemy.actor.parameters.PortParameter-->
    <property name="period">The period of the output waveform.&#10;  This is a double that defaults to 2.0.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="values">The values that will be produced at the specified offsets.&#10;  This parameter must contain an ArrayToken, and it defaults to&#10;  {1, 0}</property>
</doc>
