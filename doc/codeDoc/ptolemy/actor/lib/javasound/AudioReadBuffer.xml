<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="AudioReadBuffer" class="ptolemy.actor.lib.javasound.AudioReadBuffer">
  <description>
This actor reads a sound file into a buffer and outputs the the&#10; sample value at the specified buffer element. The sound file&#10; is read from the URL specified by the &lt;i&gt;sourceURL&lt;/i&gt;&#10; parameter.  Although the sound file must be specified&#10; as a URL, it is still possible to specify files on the local&#10; file system.&#10; &lt;p&gt;&#10; In each iteration, an IntToken is read from the input port, if&#10; there is a token available. This token specifies the address of&#10; the buffer element to read from. The address is zero-based, so&#10; address 0 corresponds to the first element and addres&#10; &lt;i&gt;bufferLength&lt;/i&gt; -1 corresponds to the last element. The sample&#10; value at the specified buffer location is converted to a DoubleToken&#10; and sent to the output port.&#10; &lt;p&gt;&#10; If an element outside of the valid address range is specified, then&#10; a DoubleToken with value 0.0 is output. If the the specified address&#10; is greater than &lt;i&gt;bufferLength&lt;/i&gt; -1, then this actor will return&#10; false in postfire.&#10; &lt;p&gt;&#10; This actor does not currently support multichannel sound files, so&#10; if a stereo sound file is specified, only the left channel will be&#10; used. This limitation may be lifted in a future version of this actor.&#10; &lt;p&gt;&#10; The audio samples that are read from the file are&#10; converted to DoubleTokens that may range from [-1.0, 1.0].&#10; Thus, the output type of this actor is DoubleToken.&#10; &lt;p&gt;&#10; &lt;b&gt;Usage&lt;/b&gt;&#10; &lt;p&gt;&#10; The &lt;i&gt;sourceURL&lt;/i&gt; parameter should be set to the name of the file,&#10; specified as a fully qualified URL. It is possible to load a file&#10; from the local file system by using the prefix &quot;file://&quot; instead of&#10; &quot;http://&quot;. Relative file paths are allowed. To specify a file&#10; relative to the current directory, use &quot;../&quot; or &quot;./&quot;. For example,&#10; if the current directory contains a file called &quot;test.wav&quot;, then&#10; &lt;i&gt;sourceURL&lt;/i&gt; should be set to &quot;file:./test.wav&quot;. If the parent&#10; directory contains a file called &quot;test.wav&quot;, then &lt;i&gt;sourceURL&lt;/i&gt;&#10; should be set to &quot;file:../test.wav&quot;. To reference the file&#10; test.wav, located at &quot;/tmp/test.wav&quot;, &lt;i&gt;sourceURL&lt;/i&gt;&#10; should be set to &quot;file:///tmp/test.wav&quot; The default value is&#10; &quot;file:///tmp/test.wav&quot;.&#10; &lt;p&gt;&#10; There are security issues involved with accessing files and audio&#10; resources in applets. Applets are only allowed access to files&#10; specified by a URL and located on the machine from which the&#10; applet is loaded. The .java.policy file may be modified to grant&#10; applets more privileges.&#10; &lt;p&gt;FIXME: This actor should extend AudioReadBuffer?&#10; &lt;p&gt;&#10; Note: Requires Java 2 v1.3.0 or later.  </description>
  <author>Brian K. Vogel</author>
  <version>$Id$</version>
  <since>Ptolemy II 2.0</since>
  <Pt.ProposedRating>Red (vogel)</Pt.ProposedRating>
  <Pt.AcceptedRating>Red (vogel)</Pt.AcceptedRating>
    <!--ptolemy.data.expr.Parameter-->
    <property name="bufferLength">The length of the audio buffer to use. The default value&#10;  is 8000.</property>
    <!--ptolemy.kernel.util.StringAttribute-->
    <property name="sourceURL">The URL of the file to read from. The default value of this&#10;  parameter is the URL &quot;file:///tmp/test.wav&quot;.&#10;  Supported file formats are  WAV, AU, and AIFF. The sound&#10;  file format is determined from the file extension.&#10;  &lt;p&gt;&#10;  An exception will occur if the path references a&#10;  non-existent or unsupported sound file.</property>
</doc>
