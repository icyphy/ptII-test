<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="SplitReader" class="ptolemy.actor.ptalon.lib.SplitReader">
  <description>
Read a file a file or URL, one line at a time, and output each line&#10; as a string.  This actor has multiple outputs, and emits blocks of&#10; lines to each output at each firing, splitting the lines as chunks&#10; of data for distributed processing.&#10;&#10; &lt;p&gt;&#10;&#10; The file or URL is specified using any form acceptable to&#10; FileParameter. Before an end of file is reached, the &lt;i&gt;endOfFile&lt;/i&gt;&#10; output produces &lt;i&gt;false&lt;/i&gt;.  The &lt;i&gt;blockSize&lt;/i&gt; and&#10; &lt;i&gt;numberOfOutputs&lt;/i&gt; parameters determine how many lines are&#10; written to each output on each firing, and how many outputs to write&#10; to.  If both of these are set to 1, this actor behaves exactly like&#10; the LineReader actor.  In the iteration where the last line of the&#10; file is read and produced on an &lt;i&gt;output&lt;/i&gt; port channel, this&#10; actor produces &lt;i&gt;true&lt;/i&gt; on the &lt;i&gt;endOfFile&lt;/i&gt; port. In that&#10; iteration, postfire() returns false.  If the actor is iterated again,&#10; after the end of file, then prefire() and postfire() will both return&#10; false, &lt;i&gt;output&lt;/i&gt; will produce the string &quot;EOF&quot;, and&#10; &lt;i&gt;endOfFile&lt;/i&gt; will produce &lt;i&gt;true&lt;/i&gt;.&#10;&#10; &lt;p&gt;&#10; In some domains (such as SDF), returning false in postfire()&#10; causes the model to cease executing.&#10; In other domains (such as DE), this causes the director to avoid&#10; further firings of this actor.  So usually, the actor will not be&#10; invoked again after the end of file is reached.&#10; &lt;p&gt;&#10; This actor reads ahead in the file so that it can produce an output&#10; &lt;i&gt;true&lt;/i&gt; on &lt;i&gt;endOfFile&lt;/i&gt; in the same iteration where it outputs&#10; the last line.  It reads the first line in preinitialize(), and&#10; subsequently reads a new line in each invocation of postfire().  The&#10; line read is produced on the &lt;i&gt;output&lt;/i&gt; in the next iteration&#10; after it is read.&#10; &lt;p&gt;&#10; This actor can skip some lines at the beginning of the file or URL, with&#10; the number specified by the &lt;i&gt;numberOfLinesToSkip&lt;/i&gt; parameter. The&#10; default value of this parameter is 0.&#10; &lt;p&gt;&#10; If you need to reset this line reader to start again at the beginning&#10; of the file, the way to do this is to call initialize() during the run&#10; of the model.  This can be done, for example, using a modal model&#10; with a transition where reset is enabled.  </description>
  <author>Adam Cataldo</author>
  <version>$Id$</version>
  <since>Ptolemy II 6.1</since>
  <Pt.ProposedRating>Red (cxh)</Pt.ProposedRating>
  <Pt.AcceptedRating>Red (cxh)</Pt.AcceptedRating>
    <!--ptolemy.actor.TypedIOPort-->
    <port name="endOfFile">An output port that produces &lt;i&gt;false&lt;/i&gt; until the end of file&#10;  is reached, at which point it produces &lt;i&gt;true&lt;/i&gt;. The type&#10;  is boolean.</port>
    <!--ptolemy.data.expr.Parameter-->
    <property name="blockSize">This number of lines to output to each port when this actor is&#10;  fired.</property>
    <!--ptolemy.data.expr.FileParameter-->
    <property name="fileOrURL">The file name or URL from which to read.  This is a string with&#10;  any form accepted by FileParameter.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="numberOfLinesToSkip">The number of lines to skip at the beginning of the file or URL.&#10;  This parameter contains an IntToken, initially with value 0.&#10;  The value of this parameter must be non-negative.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="numberOfOutputs">The number of output actors to write to.&#10;  This parameter contains an IntToken, initially with value 1.&#10;  The value must be greater than zero.</property>
</doc>
