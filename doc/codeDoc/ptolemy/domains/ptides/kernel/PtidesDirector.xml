<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="PtidesDirector" class="ptolemy.domains.ptides.kernel.PtidesDirector">
  <description>
This director implements the Ptides programming model,&#10;  which is used for the design of distributed real-time systems.&#10;&#10;  &lt;p&gt; This director can only be used inside the PtidesPlatform&#10;  and if the PtidesPlatform is dragged and dropped from the library,&#10;  it already contains a PtidesDirector. A PtidesPlatform must be&#10;  embedded in a timed director such as DE or Continuous. The time of&#10;  this enclosing director simulates physical time.&#10;  The localClock of this PtidesDirector simulates platformTime.&lt;/p&gt;&#10;&#10;  &lt;p&gt; The Ptides director is based on the DE director. Like the DE&#10;  director, this director maintains a totally ordered set of events.&#10;  Event timestamps are given in logical time. The logical time is decoupled&#10;  from the platformTime. The model time of the director is the&#10;  platformTime unless an actor is fired; then the model time is&#10;  the timestamp of the event that caused the actor firing.&lt;/p&gt;&#10;&#10;  &lt;p&gt;Unlike the DE Director, this director can process events out of timestamp order&#10;  if they are not causally related. Whether events can be processed&#10;  is checked in a safe-to-process analysis.&#10;  This analysis returns a boolean to indicate whether an event&#10;  can be processed without violating Ptides&#10;  semantics, based on information such as events currently in the&#10;  event queue, their model time relationship with each other, as&#10;  well as the current platform physical time. In this particular version of&#10;  the Ptides scheduler, the director takes all events&#10;   from the event queue, and compares their timestamp&#10;  with the current platform time + a pre-computed offset (call this&#10;  the delayOffset). If the platform time is larger, than this event&#10;  is safe to process. Otherwise, we wait for platform time to pass&#10;  until this event becomes safe, at which point it is processed.&#10;  Other, smarter kinds of safe-to-process analysis can be&#10;  implemented in future versions. &lt;/p&gt;&#10;&#10;  &lt;p&gt;Currently, only&#10;  the DE director can be used as the enclosing director. One reason&#10;  for using the DE director is that time cannot go backwards in DE,&#10;  which is an important physical time property. More importantly,&#10;  the fire method of this director changes the persistent state of&#10;  actors, which means this director cannot be used inside of an&#10;  actor that performs fix point iteration, which includes (currently),&#10;  Continuous, CT and SR. For more details, please refer&#10;  to Edward A. Lee, Haiyang Zheng. &lt;a&#10;  href=&quot;http://chess.eecs.berkeley.edu/pubs/430.html&quot;&gt;Leveraging&#10;  Synchronous Language Principles for Heterogeneous Modeling&#10;  and Design of Embedded Systems&lt;/a&gt;, Proceedings of the&#10;  7th ACM &amp;amp; IEEE international conference on Embedded&#10;  software, ACM, 114-123, 2007.&lt;/p&gt;&#10;&#10;  &lt;p&gt; This director provides a set of features to address both&#10;  the distributed and the real-time aspects of system design.&#10;  To address the distributed aspect, each PtidesPlatform simulates&#10;  a computation platform&#10;  (e.g., a microprocessor), while the enclosing director simulates&#10;  the physical world. Actors under the Ptides director then communicate&#10;  to the outside via SensorPorts, ActuatorPorts, or network ports&#10;  (NetworkReceivers, NetworkTransmitters).&lt;/p&gt;&#10;&#10;  &lt;p&gt; This director allows for simulation of execution time. If the PtidesPlatform&#10;  contains ResourceSchedulers, the scheduling of actors is performed by these.&#10;  Actors must specify in parameters which ResourceSchedulers they are assigned&#10;  to and the executionTime. The passage of execution time equals the passage&#10;  of platformTime. Execution time has no influence on the event timestamps.&lt;/p&gt;&#10;&#10;  &lt;p&gt; In a Ptides environment, all platforms are assumed to be synchronized&#10;  within a bounded error.&lt;/p&gt;&#10;&#10;  &lt;p&gt; The platform time is used in the following&#10;  situations: generating timestamps for sensor events, enforcing deadlines&#10;  for actuation events, and to setup the wake-up time for timed interrupts.&#10;  Also, the Ptides operational semantics assumes&#10;  a bound in the time synchronization error. This error is captured in the&#10;  parameter &lt;a href=&quot;../../../../ptolemy/domains/ptides/kernel/PtidesDirector.xml#clockSynchronizationErrorBound&quot;&gt;clockSynchronizationErrorBound&lt;/a&gt;. If&#10;  the actual error exceeds this bound, the safe-to-process analysis could&#10;  produce an incorrect result. The demo PtidesNetworkLatencyTest illustrates&#10;  this error.&lt;/p&gt;&#10;&#10;  &lt;p&gt; The implementation is based on the operational semantics&#10;  of Ptides, as described in: Jia Zou, Slobodan Matic, Edward&#10;  A. Lee, Thomas Huining Feng, Patricia Derler.  &lt;a&#10;  href=&quot;http://chess.eecs.berkeley.edu/pubs/529.html&quot;&gt;Execution&#10;  Strategies for Ptides, a Programming Model for Distributed&#10;  Embedded Systems&lt;/a&gt;, 15th IEEE Real-Time and Embedded Technology&#10;  and Applications Symposium, 2009, IEEE Computer Society, 77-86,&#10;  April, 2009.&lt;/p&gt;  </description>
  <author>Patricia Derler, Edward A. Lee, Slobodan Matic, Mike Zimmer, Jia Zou</author>
  <version>$Id$</version>
  <since>Ptolemy II 10.0</since>
  <Pt.ProposedRating>Red (derler)</Pt.ProposedRating>
  <Pt.AcceptedRating>Red (derler)</Pt.AcceptedRating>
    <!--ptolemy.actor.parameters.SharedParameter-->
    <property name="clockSynchronizationErrorBound">Bound on clock synchronization error across all platforms.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="autoThrottling">Auto throttling of local sources. This parameter is only visible&#10;  in expert mode and defaults to the boolean value true.</property>
</doc>
