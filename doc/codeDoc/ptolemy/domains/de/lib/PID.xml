<?xml version="1.0" standalone="yes"?>
<!DOCTYPE doc PUBLIC "-//UC Berkeley//DTD DocML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/DocML_1.dtd">
<doc name="PID" class="ptolemy.domains.de.lib.PID">
  <description>
Generate PID output for a given input. The output is the sum of a proportional&#10; gain (P), discrete integration (I), and discrete derivative (D).&#10; &lt;p&gt;&#10; The proportional component of the output is immediately available, such that&#10; yp[n]=Kp*x[n], where &lt;i&gt;yp&lt;/i&gt; is the proportional component of the output,&#10; &lt;i&gt;Kp&lt;/i&gt; is the proportional gain, and &lt;i&gt;x&lt;/i&gt; is the input value.&#10; &lt;p&gt;&#10; For integral gain, the output is available after two input symbols have been&#10; received, such that yi[n]=Ki*(yi[n-1]+(x[n] + x[n-1])*dt[n]/2), where &lt;i&gt;yi&lt;/i&gt;&#10; is the integral component of the output, &lt;i&gt;Ki&lt;/i&gt; is the integral gain, and&#10; &lt;i&gt;dt[n]&lt;/i&gt; is the time differential between input events x[n] and x[n-1].&#10; &lt;p&gt;&#10; For derivative gain, the output is available after two input symbols have been&#10; received, such that yd[n] = Kd*(x[n]-x[n-1])/dt, where &lt;i&gt;yd&lt;/i&gt; is the&#10; derivative component of the output, &lt;i&gt;Kd&lt;/i&gt; is the derivative gain, and&#10; &lt;i&gt;dt&lt;/i&gt; is the time differential between input events events x[n] and x[n-1].&#10; &lt;p&gt;&#10; The output of this actor is constrained to be a double, and input must be castable&#10; to a double. If the input signal is not left-continuous and the derivative constant&#10; is nonzero, then this actor will throw an exception as the derivative will be either infinite&#10; or undefined. If the derivative constant is zero, then this actor may receive&#10; discontinuous input.&#10; &lt;p&gt;&#10; y[0]=Kp*x[0]&#10; &lt;br&gt;y[n] = yp[n] + yi[n] + yd[n]&#10; &lt;br&gt;y[n] = Kp*x[n] + Ki*sum{x=1}{n}{(x[n]+x[n-1])/2*dt[n]} + Kd*(x[n]-x[n-1]/dt[n])&#10; &lt;p&gt;&#10; In postfire(), if an event is present on the &lt;i&gt;reset&lt;/i&gt; port, this&#10; actor resets to its initial state, where integral and derivative components&#10; of output will not be present until two subsequent inputs have been consumed.&#10; This is useful if the input signal is switched on and off, in which case the&#10; time gap between events becomes large and would otherwise effect the value of&#10; the derivative (for one sample) and the integral.&#10; &lt;p&gt;  </description>
  <author>Jeff C. Jensen</author>
  <version>$Id$</version>
  <since>Ptolemy II 8.0</since>
    <!--ptolemy.actor.TypedIOPort-->
    <port name="reset">The reset port, which has undeclared type. If this port&#10;  receives a token, this actor resets to its initial state,&#10;  and no output is generated until two inputs have been received.</port>
    <!--ptolemy.data.expr.Parameter-->
    <property name="Kp">Proportional gain of the controller. Default value is 1.0.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="Ki">Integral gain of the controller. Default value is 0.0,&#10;  which disables integral control.</property>
    <!--ptolemy.data.expr.Parameter-->
    <property name="Kd">Derivative gain of the controller. Default value is 0.0, which disables&#10;  derivative control. If Kd=0.0, this actor can receive discontinuous&#10;  signals as input; otherwise, if Kd is nonzero and a discontinuous signal&#10;  is received, an exception will be thrown.</property>
</doc>
